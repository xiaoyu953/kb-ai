📚《Spring AI Agent 6 周进阶实战营・Heima-AI 专属版 V1.0》
副标题：基于已通关 RAG 系统，升级企业级智能多工具协作助手
💡 你的前置优势
✅ 已完成RAG 全闭环（文档解析→向量化→检索→精准溯源），无需重复开发
✅ 已适配DeepSeek 大模型 + Qdrant 向量库 + Redis 缓存，技术栈无缝复用
✅ 项目工程化完善（Docker 基础 + 接口规范 + 会话管理），零底层搭建成本
✅ 本阶段核心新增能力
工具标准化封装 → Agent 决策引擎 → 多工具联动 → 双记忆体系 → 多智能体协作 → 生产级落地
🎯 最终交付物（第 6 周 完整交付）
✅ 可落地运行系统：复合需求提问 → Agent 自主拆分工单 → 多工具调用 → 整合结果 + 溯源标注完整闭环
✅ 标准化 GitHub 仓库：含完整升级代码、Docker Compose 一键部署脚本、完整版 README（带 Agent 架构图 + 演示视频）
✅ 3 分钟成品演示视频：完整展示「复合需求提问→任务拆分→多工具调用→记忆交互→结果溯源」核心流程
🗓️ 阶段一：Agent 基础入门（第 1–2 周）
核心目标：将已有 RAG 封装为标准工具，实现单工具调用 Agent 闭环
✅ 第 1 周：工具标准化 + Agent 决策引擎搭建
▸ 成功标志：调用 Agent 接口提问「年假几天」，自动调用 RAG 工具返回带【来源:xxx.pdf,p.x】的回答
▸ 关键动作：
复用 Heima-AI 工程结构，新增Spring AI Agent 核心依赖，无需重构原有代码
将 RAG 检索能力封装为带@Tool注解的标准工具（明确功能描述 + 入参规范，例：「文档知识库查询工具，用于回答年假 / 制度类问题，入参为用户提问文本」）
配置防幻觉决策 Prompt，强制规则：「优先调用工具→基于工具结果回答→保留溯源标注→无信息时回复‘我不知道’」
新增 Agent 专属对话接口/agent/chat，与原有 RAG 接口隔离，独立验证功能
▸ 本周锦囊：@Tool注解的描述越精准，Agent 匹配工具的准确率越高！务必写清「适用场景 + 入参类型」
✅ 第 2 周：多工具联动 + 需求拆分能力实现
▸ 成功标志：提问「查年假天数 + 查工单号 12345 审批状态」，Agent 自动拆分子任务，依次调用 RAG + 工单工具并整合结果
▸ 关键动作：
新增「工单查询」业务工具，严格遵循单一职责原则封装（@Tool注解标注用途：「仅用于查询工单号对应的审批状态」）
优化 Agent 决策 Prompt，明确多工具边界：「文档类问题用 RAG 工具，工单号类问题用工单工具；复合需求需拆分后逐个调用」
配置子任务有序执行规则，避免工具调用混乱
本地测试多场景（纯文档 / 纯工单 / 复合需求），调试 Agent 工具选择准确率
▸ 避坑提示：若 Agent 漏执行子任务，在 Prompt 中添加强制约束：「必须逐条处理所有需求，完成一个再执行下一个，禁止遗漏」
🛠️ 阶段二：Agent 核心能力升级（第 3–4 周）
核心目标：解决 Agent「无记忆」痛点，实现任务规划 + 多智能体协作，突破能力天花板
✅ 第 3 周：双记忆体系搭建（短期会话 + 长期任务）
▸ 核心任务：让 Agent 具备上下文理解能力，支持跨会话任务跟踪，零新增中间件成本
▸ 关键动作：
复用 Redis 实现短期会话记忆：存储同一会话的聊天历史，设置 24 小时过期策略，避免内存占用过高
复用 Qdrant 向量库实现长期任务记忆：将用户任务（如「记住我的工单号是 12345」）向量化存储，支持跨会话精准检索
改造 Agent 接口，实现「记忆读取→拼接历史 + 当前提问→调用工具→存储新对话」全流程串联
测试记忆交互场景：①连续提问（先问年假天数，再问「能否拆分」）；②跨会话查询（重启服务后查工单进度）
▸ 核心亮点：完全复用现有 Redis+Qdrant 组件，无需引入新技术，降低学习与部署成本
✅ 第 4 周：任务规划 + 多智能体协作落地
▸ 核心任务：从「单 Agent 干活」升级为总控 + 专属 Agent 分工协作，处理复杂业务流程
▸ 关键动作：
设计任务规划 Prompt，赋予总控 Agent 复杂需求拆分能力（例：「查年假→生成请假单→查审批进度」拆分为 3 个有序子任务）
搭建多智能体架构：
总控 Agent：仅负责任务拆分、分配、结果整合（不做具体业务）
专属 Agent：RAG Agent（文档查询）、行政 Agent（表单生成）、订单 Agent（审批查询）
配置多智能体通信规则：子任务结果自动回传给总控 Agent，实现无缝整合
测试端到端复杂场景，验证任务拆分、工具调用、结果整合的完整性
▸ 本周锦囊：多智能体的核心是「角色分工明确」，总控 Agent 只做「指挥官」，不做「执行者」
🏗️ 阶段三：生产级落地 + 成品包装（第 5–6 周）
核心目标：从 Demo 升级为企业级可用服务，完成作品集封装，适配求职 / 项目落地双需求
✅ 第 5 周：工程化改造 + 稳定性优化
▸ 核心任务：解决生产环境痛点，提升系统安全性、稳定性、性能
▸ 关键动作：
权限管控：工具层接入 userId 校验，实现「只能查询自身工单 / 文档」的权限隔离，防止越权访问
异常重试 + 降级：集成 Spring Retry，工具调用失败自动重试 3 次；重试失败返回友好提示（如「知识库服务暂不可用」），避免服务崩溃
性能优化：复用 Redis 缓存「相同用户 + 相同问题」的结果，减少大模型 / 工具重复调用，响应速度提升 80%
全链路监控日志：记录「用户提问→Agent 决策→工具调用→结果返回」完整流程，支持问题快速排查；集成 Prometheus+Grafana 监控核心指标（调用量、成功率、响应时间）
▸ 避坑提示：缓存需添加chatId+userId双重维度，避免多用户数据混淆
✅ 第 6 周：项目封装 + 成品交付
▸ 核心任务：完成项目标准化包装，产出可直接展示的优质作品集
▸ 关键动作：
项目整合：梳理代码结构，删除冗余内容，明确 Agent 核心模块（工具池 / 决策引擎 / 双记忆服务）
容器化一键部署：编写完整 Docker Compose 脚本，整合「应用 + Qdrant+Redis」，实现一行命令启动所有服务，本地 / 云服务器通用
标准化文档编写：升级 README 文档，新增内容：
Agent 核心功能亮点（多工具联动 / 双记忆体系 / 多智能体协作）
多智能体架构图（Mermaid 语法绘制，直接嵌入文档）
三步式部署教程（拉取代码→配置环境变量→启动服务）
专属避坑指南（针对 Agent 开发常见问题）
全链路测试验收：覆盖所有核心场景，修复已知问题，确保系统无报错、无功能缺失
3 分钟演示视频录制：重点展示「复合需求提问→任务拆分→多工具调用→记忆交互→结果溯源」全流程，突出企业级实用价值
▸ 核心亮点：项目可直接写入简历，面试时可清晰讲解 Agent 架构设计、技术难点与解决方案，吊打纯理论选手
🧭 专属避坑指南（针对性解决 Agent 高频问题）
▸ Agent 不调用工具：优化@Tool注解的功能描述（更精准），在 Prompt 中添加「必须优先使用工具回答，禁止直接使用自身知识库」强制规则
▸ 多工具调用漏任务：Prompt 明确要求「逐条处理所有需求，列出任务清单并按顺序执行，完成后输出整合结果」
▸ 记忆导致回答混乱：限制 Redis 会话记忆长度（仅保留最近 5 轮对话）；Qdrant 任务记忆添加 userId 标识，实现用户数据隔离
▸ 部署后响应慢：启用 Redis 结果缓存，同时优化向量检索参数（调整 top-k 值），平衡检索精准度与速度
▸ 多智能体协作冲突：明确总控 Agent 与专属 Agent 的职责边界，总控只做任务分配与结果整合，不参与具体工具调用
🎁 专属优质资源包（精选适配，无需额外筛选）
▸ Agent 核心依赖：Spring AI Agent Starter（官方适配，无缝集成现有 Spring Boot 项目）
▸ 工具封装规范：@Tool注解编写模板（含功能描述 / 入参说明 / 返回格式示例，直接复制使用）
▸ Prompt 模板库：决策 Prompt / 任务规划 Prompt / 多智能体协作 Prompt（开箱即用，已适配 DeepSeek 模型）
▸ 前端界面推荐：复用原有 RAG 前端，新增「Agent 模式」切换按钮，无需额外开发前端代码
▸ 面试高频题集：Agent 与 RAG 的区别 / 记忆体系设计思路 / 多智能体协作原理（附标准答案 + 项目落地案例）