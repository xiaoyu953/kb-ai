spring:
  application:
    name: heima-ai

  # å…è®¸è·¨åŸŸï¼ˆå…³é”®ï¼ï¼‰
  cors:
    allowed-origins: "*"

  # ğŸ”Œ å¯¹æ¥ DeepSeek å®˜æ–¹ APIï¼ˆä»…ç”¨äºèŠå¤©ï¼‰
  ai:
    openai:
      api-key: ${DEEPSEEK_API_KEY:sk-8023757f6fcd4c35886ba83e2bacb4d6}
      base-url: https://api.deepseek.com  # âš ï¸ æ³¨æ„ï¼šåŠ  /v1
      chat:
        options:
          model: deepseek-chat
      embedding:
        enabled: false

    # âœ… åªä¿ç•™ Ollama Embeddingï¼ˆå½»åº•åˆ é™¤ transformers é…ç½®ï¼ï¼‰
    ollama:
      base-url: http://host.docker.internal:11434
      embedding:
        enabled: true
        options:
          model: mxbai-embed-large

    # ğŸ—ƒï¸ å‘é‡åº“é…ç½®ï¼ˆè‡ªåŠ¨ä½¿ç”¨ä¸Šé¢çš„ Ollama embeddingï¼‰
    vectorstore:
      qdrant:
        host: ${QDRANT_HOST:qdrant}
        port: ${QDRANT_GRPC_PORT:6334}
        collection-name: heima_rag
        initialize-schema: true
        embedding-model: ollama   # â†â†â† å°±åŠ è¿™ä¸€è¡Œ

  # ğŸ—ƒï¸ Redis é…ç½®
  data:
    redis:
      host: ${REDIS_HOST:redis}
      port: 6379
      timeout: 2000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0

server:
  port: 8088

# è‡ªå®šä¹‰é…ç½®
rag:
  cache:
    expire-hours: 1

tool:
  rate-limit:
    window-minutes: 1
    max-calls: 5

logging:
  level:
    org.springframework.ai: debug
    com.itheima.ai: debug
    io.qdrant.client: warn